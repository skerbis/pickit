// Default Theme for Pickit
// Modern, accessible theme with CSS variables and automatic dark mode support
// Based on flatpickr's foundation with enhanced accessibility

// Base Stylus variables - clean neutral defaults
$calendarBackground = #ffffff
$calendarBorderColor = #e5e7eb

$monthForeground = #1f2937
$monthBackground = #f9fafb

$weekdaysBackground = #f9fafb
$weekdaysForeground = #6b7280

$dayForeground = #1f2937
$dayHoverBackground = #f3f4f6

$todayColor = #3b82f6
$today_fg_color = #1f2937

$selectedDayBackground = #3b82f6
$selectedDayForeground = #ffffff

$disabled_day_color = #9ca3af

$noCalendarBorder = true

@require "../pickit"

// CSS Variables for easy customization
.flatpickr-calendar
	background var(--pickit-bg, #ffffff)
	border-radius var(--pickit-border-radius, 8px)
	box-shadow var(--pickit-shadow, 0 4px 6px rgba(0, 0, 0, 0.07), 0 1px 3px rgba(0, 0, 0, 0.06))
	border 1px solid var(--pickit-border-color, #e5e7eb)

.flatpickr-months
	background var(--pickit-month-bg, #f9fafb)
	border-radius var(--pickit-border-radius, 8px) var(--pickit-border-radius, 8px) 0 0
	
	.flatpickr-month
		background var(--pickit-month-bg, #f9fafb)
		color var(--pickit-month-fg, #1f2937)
		fill var(--pickit-month-fg, #1f2937)
	
	.flatpickr-prev-month,
	.flatpickr-next-month
		fill var(--pickit-month-fg, #1f2937)
		
		svg
			fill var(--pickit-month-fg, #1f2937)
		
		&:hover svg
			fill var(--pickit-arrow-hover-color, #3b82f6)

.flatpickr-current-month
	.flatpickr-monthDropdown-months
		background var(--pickit-month-bg, #f9fafb)
		color var(--pickit-month-fg, #1f2937)
		border none
		
	.numInputWrapper input.cur-year
		color var(--pickit-month-fg, #1f2937)

.flatpickr-current-month .numInputWrapper
	.arrowUp,
	.arrowDown
		&:after
			border-bottom-color var(--pickit-month-fg, #1f2937)
	.arrowDown:after
		border-top-color var(--pickit-month-fg, #1f2937)

span.flatpickr-weekday,
abbr.flatpickr-weekday
	background var(--pickit-weekdays-bg, #f9fafb) !important
	color var(--pickit-weekdays-fg, #6b7280)
	font-weight 600
	text-transform uppercase
	font-size 11px
	letter-spacing 0.5px

.flatpickr-day
	color var(--pickit-day-fg, #1f2937)
	background var(--pickit-day-bg, transparent)
	border-radius var(--pickit-day-border-radius, 6px)
	transition var(--pickit-transition, all 0.15s ease)
	font-weight 500
	border none
	
	&.today
		border-color var(--pickit-today-color, #3b82f6)
		color var(--pickit-today-fg, #1f2937)
		background var(--pickit-today-bg, rgba(59, 130, 246, 0.1))
		font-weight 600
		
		&:hover,
		&:focus
			border-color var(--pickit-today-color, #3b82f6)
			background var(--pickit-today-hover-bg, rgba(59, 130, 246, 0.15))
			color var(--pickit-today-fg, #1f2937)
	
	&.selected,
	&.startRange,
	&.endRange
		background var(--pickit-selected-bg, #3b82f6)
		border-color var(--pickit-selected-bg, #3b82f6)
		color var(--pickit-selected-fg, #ffffff)
		font-weight 600
		
		&:hover,
		&:focus
			background var(--pickit-selected-hover-bg, #2563eb)
			border-color var(--pickit-selected-hover-bg, #2563eb)
	
	&.inRange
		background var(--pickit-range-bg, rgba(59, 130, 246, 0.1))
		border-color var(--pickit-range-bg, rgba(59, 130, 246, 0.1))
		box-shadow -5px 0 0 var(--pickit-range-bg, rgba(59, 130, 246, 0.1)), 5px 0 0 var(--pickit-range-bg, rgba(59, 130, 246, 0.1))
	
	&.disabled,
	&.prevMonthDay,
	&.nextMonthDay
		color var(--pickit-disabled-color, #9ca3af)
		
		&:hover
			background transparent
			border-color transparent
	
	&:hover:not(.disabled):not(.selected)
		background var(--pickit-day-hover-bg, #f3f4f6)
		border-color var(--pickit-day-hover-bg, #f3f4f6)

.flatpickr-time
	border-top 1px solid var(--pickit-time-border-color, #e5e7eb)
	background var(--pickit-time-bg, #f9fafb)
	
	input
		background var(--pickit-time-input-bg, #ffffff)
		border 1px solid var(--pickit-time-input-border, #e5e7eb)
		border-radius var(--pickit-time-input-radius, 4px)
		color var(--pickit-time-input-color, #1f2937)
		font-weight 500
		
		&:hover,
		&:focus
			background var(--pickit-time-input-hover-bg, #ffffff)
			border-color var(--pickit-time-input-hover-border, #3b82f6)

.flatpickr-time-separator,
.flatpickr-am-pm
	color var(--pickit-time-color, #1f2937)
	font-weight 600

// Dark mode support via prefers-color-scheme
@media (prefers-color-scheme: dark)
	.flatpickr-calendar
		--pickit-bg: #1f2937
		--pickit-border-color: #374151
		--pickit-month-bg: #111827
		--pickit-month-fg: #f9fafb
		--pickit-weekdays-bg: #111827
		--pickit-weekdays-fg: #9ca3af
		--pickit-day-fg: #e5e7eb
		--pickit-day-bg: #1f2937
		--pickit-day-hover-bg: #374151
		--pickit-today-color: #60a5fa
		--pickit-today-fg: #ffffff
		--pickit-today-bg: rgba(96, 165, 250, 0.15)
		--pickit-today-hover-bg: rgba(96, 165, 250, 0.25)
		--pickit-selected-bg: #3b82f6
		--pickit-selected-hover-bg: #2563eb
		--pickit-range-bg: rgba(96, 165, 250, 0.15)
		--pickit-disabled-color: #6b7280
		--pickit-time-bg: #111827
		--pickit-time-border-color: #374151
		--pickit-time-input-bg: #1f2937
		--pickit-time-input-border: #374151
		--pickit-time-input-hover-border: #3b82f6
		--pickit-time-color: #f9fafb
		--pickit-arrow-hover-color: #60a5fa
		
		background #1f2937
		border-color #374151
		box-shadow 0 4px 6px rgba(0, 0, 0, 0.3), 0 1px 3px rgba(0, 0, 0, 0.2)
	
	.flatpickr-months
		background #111827
		
		.flatpickr-month
			background #111827
			color #f9fafb
			fill #f9fafb
	
	.flatpickr-months .flatpickr-prev-month,
	.flatpickr-months .flatpickr-next-month
		fill #f9fafb
		
		svg
			fill #f9fafb
		
		&:hover svg
			fill #60a5fa
	
	.flatpickr-current-month .flatpickr-monthDropdown-months,
	.flatpickr-current-month .numInputWrapper input.cur-year
		background #111827
		color #f9fafb
	
	.flatpickr-current-month .numInputWrapper .arrowUp:after,
	.flatpickr-current-month .numInputWrapper .arrowDown:after
		border-bottom-color #f9fafb
	.flatpickr-current-month .numInputWrapper .arrowDown:after
		border-top-color #f9fafb
	
	.flatpickr-weekdays
		background #111827
	
	span.flatpickr-weekday
		background #111827 !important
		color #9ca3af !important
	
	.flatpickr-innerContainer
		background #1f2937
	
	.flatpickr-days
		background #1f2937
	
	.dayContainer
		background #1f2937
	
	.flatpickr-day
		color #e5e7eb
		background #1f2937
		border none
		
		&.today
			border-color #60a5fa
			color #ffffff
			background rgba(96, 165, 250, 0.15)
			
			&:hover,
			&:focus
				border-color #60a5fa
				background rgba(96, 165, 250, 0.25)
				color #ffffff
		
		&.selected,
		&.startRange,
		&.endRange
			background #3b82f6
			border-color #3b82f6
			color #ffffff
			
			&:hover,
			&:focus
				background #2563eb
				border-color #2563eb
		
		&.inRange
			background rgba(96, 165, 250, 0.15)
			border-color rgba(96, 165, 250, 0.15)
			color #e5e7eb
			box-shadow -5px 0 0 rgba(96, 165, 250, 0.15), 5px 0 0 rgba(96, 165, 250, 0.15)
		
		&.disabled,
		&.prevMonthDay,
		&.nextMonthDay
			color #6b7280
			background #1f2937
			border none
		
		&:hover:not(.disabled):not(.selected)
			background #374151
			border none
			color #ffffff
	
	.flatpickr-time
		border-top-color #374151
		background #111827
		
		input
			background #1f2937
			border-color #374151
			color #f9fafb
			
			&:hover,
			&:focus
				border-color #3b82f6
				background #1f2937
	
	.flatpickr-time-separator,
	.flatpickr-am-pm
		color #f9fafb
	
	.numInputWrapper
		span.arrowUp:after
			border-bottom-color #f9fafb !important
		
		span.arrowDown:after
			border-top-color #f9fafb !important

// High contrast mode support
@media (prefers-contrast: high)
	.flatpickr-calendar
		border-width 2px
		border-color currentColor
	
	.flatpickr-day
		&.today
			border-width 2px
		
		&.selected,
		&.startRange,
		&.endRange
			border-width 2px
			font-weight 700
		
		&:hover:not(.disabled):not(.selected)
			border 2px solid currentColor

// Reduced motion support
@media (prefers-reduced-motion: reduce)
	.flatpickr-calendar,
	.flatpickr-day
		transition none
		animation none
