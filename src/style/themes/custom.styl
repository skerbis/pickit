// Custom Theme for flatpickr
// Fully customizable via CSS variables with accessibility support
// Neutral by default, supports prefers-color-scheme, prefers-contrast, etc.

// Base Stylus variables - neutral defaults for accessibility
$calendarBackground = #ffffff
$calendarBorderColor = #d1d5db

$monthForeground = #1f2937
$monthBackground = #f9fafb

$weekdaysBackground = #f3f4f6
$weekdaysForeground = #6b7280

$dayForeground = #1f2937
$dayHoverBackground = #f3f4f6

$todayColor = #2563eb
$today_fg_color = #1f2937

$selectedDayBackground = #2563eb
$selectedDayForeground = #ffffff

$disabled_day_color = #9ca3af

$noCalendarBorder = true

@require "../flatpickr"

// Enhanced styling with CSS variables and accessibility support
// Override these CSS variables to customize the theme
// Supports: prefers-color-scheme (light/dark), prefers-contrast (high), prefers-reduced-motion

.flatpickr-calendar
	background var(--fp-bg, #ffffff)
	border-radius var(--fp-border-radius, 8px)
	box-shadow var(--fp-shadow, 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08))
	border 1px solid var(--fp-border-color, #d1d5db)

.flatpickr-months
	background var(--fp-month-bg, #f9fafb)
	border-radius var(--fp-border-radius, 8px) var(--fp-border-radius, 8px) 0 0
	
	.flatpickr-month
		background var(--fp-month-bg, #f9fafb)
		color var(--fp-month-fg, #1f2937)
		fill var(--fp-month-fg, #1f2937)
	
	.flatpickr-prev-month,
	.flatpickr-next-month
		fill var(--fp-month-fg, #1f2937)
		
		svg
			fill var(--fp-month-fg, #1f2937)
		
		&:hover
			svg
				fill var(--fp-arrow-hover-color, #2563eb)

.flatpickr-current-month
	.flatpickr-monthDropdown-months
		background var(--fp-month-bg, #f9fafb)
		color var(--fp-month-fg, #1f2937)
		border none
		
	.numInputWrapper
		input.cur-year
			color var(--fp-month-fg, #1f2937)

.flatpickr-current-month .numInputWrapper
	.arrowUp,
	.arrowDown
		&:after
			border-bottom-color var(--fp-month-fg, #1f2937)
	.arrowDown:after
		border-top-color var(--fp-month-fg, #1f2937)

span.flatpickr-weekday
	background var(--fp-weekdays-bg, #f3f4f6)
	color var(--fp-weekdays-fg, #6b7280)
	font-weight 600
	text-transform uppercase
	font-size 11px
	letter-spacing 0.5px

.flatpickr-day
	color var(--fp-day-fg, #1f2937)
	border-radius var(--fp-day-border-radius, 6px)
	transition var(--fp-transition, all 0.2s ease)
	font-weight 500
	border none
	
	&.today
		border-color var(--fp-today-color, #2563eb)
		color var(--fp-today-fg, #1f2937)
		background var(--fp-today-bg, rgba(37, 99, 235, 0.1))
		font-weight 600
		&:hover,
		&:focus
			border-color var(--fp-today-color, #2563eb)
			background var(--fp-today-hover-bg, rgba(37, 99, 235, 0.15))
			color var(--fp-today-fg, #1f2937)
			box-shadow var(--fp-today-hover-shadow, 0 2px 4px rgba(37, 99, 235, 0.3))
	
	&.selected,
	&.startRange,
	&.endRange
		background var(--fp-selected-bg, #2563eb)
		border-color var(--fp-selected-bg, #2563eb)
		color var(--fp-selected-fg, #ffffff)
		font-weight 600
		box-shadow var(--fp-selected-shadow, 0 2px 4px rgba(37, 99, 235, 0.4))
		&:hover,
		&:focus
			background var(--fp-selected-hover-bg, #1d4ed8)
			border-color var(--fp-selected-hover-bg, #1d4ed8)
			box-shadow var(--fp-selected-hover-shadow, 0 3px 6px rgba(37, 99, 235, 0.5))
	
	&.inRange
		background var(--fp-range-bg, rgba(37, 99, 235, 0.1))
		border-color var(--fp-range-bg, rgba(37, 99, 235, 0.1))
		box-shadow -5px 0 0 var(--fp-range-bg, rgba(37, 99, 235, 0.1)), 5px 0 0 var(--fp-range-bg, rgba(37, 99, 235, 0.1))
	
	&.disabled,
	&.prevMonthDay,
	&.nextMonthDay
		color var(--fp-disabled-color, #9ca3af)
		&:hover
			background transparent
			border-color transparent
			box-shadow none
	
	&:hover:not(.disabled):not(.selected)
		background var(--fp-day-hover-bg, #f3f4f6)
		border-color var(--fp-day-hover-bg, #f3f4f6)
		box-shadow var(--fp-day-hover-shadow, 0 1px 3px rgba(0, 0, 0, 0.1))

.flatpickr-time
	border-top 1px solid var(--fp-time-border-color, #e5e7eb)
	background var(--fp-time-bg, #f9fafb)
	
	input
		background var(--fp-time-input-bg, #ffffff)
		border 1px solid var(--fp-time-input-border, #d1d5db)
		border-radius var(--fp-time-input-radius, 6px)
		color var(--fp-time-input-color, #1f2937)
		font-weight 500
		box-shadow inset 0 1px 2px rgba(0, 0, 0, 0.05)
		&:hover,
		&:focus
			background var(--fp-time-input-hover-bg, #ffffff)
			border-color var(--fp-time-input-hover-border, #2563eb)
			box-shadow inset 0 1px 2px rgba(0, 0, 0, 0.05), 0 0 0 3px rgba(37, 99, 235, 0.1)

.flatpickr-time-separator,
.flatpickr-am-pm
	color var(--fp-time-color, #1f2937)
	font-weight 600

// Dark mode support via prefers-color-scheme
@media (prefers-color-scheme: dark)
	.flatpickr-calendar
		background var(--fp-bg, #1f2937)
		border-color var(--fp-border-color, #374151)
		box-shadow var(--fp-shadow, 0 4px 6px rgba(0, 0, 0, 0.3), 0 1px 3px rgba(0, 0, 0, 0.2))
	
	.flatpickr-months
		background var(--fp-month-bg, #111827)
		
		.flatpickr-month
			background var(--fp-month-bg, #111827)
			color var(--fp-month-fg, #f9fafb)
			fill var(--fp-month-fg, #f9fafb)
	
	.flatpickr-months .flatpickr-prev-month,
	.flatpickr-months .flatpickr-next-month
		fill var(--fp-month-fg, #f9fafb)
		
		svg
			fill var(--fp-month-fg, #f9fafb)
		
		&:hover svg
			fill var(--fp-arrow-hover-color, #60a5fa)
	
	.flatpickr-current-month .flatpickr-monthDropdown-months,
	.flatpickr-current-month .numInputWrapper input.cur-year
		background var(--fp-month-bg, #111827)
		color var(--fp-month-fg, #f9fafb)
	
	.flatpickr-current-month .numInputWrapper .arrowUp:after,
	.flatpickr-current-month .numInputWrapper .arrowDown:after
		border-bottom-color var(--fp-month-fg, #f9fafb)
	.flatpickr-current-month .numInputWrapper .arrowDown:after
		border-top-color var(--fp-month-fg, #f9fafb)
	
	span.flatpickr-weekday
		background var(--fp-weekdays-bg, #111827)
		color var(--fp-weekdays-fg, #9ca3af)
	
	.flatpickr-day
		color var(--fp-day-fg, #f9fafb)
		
		&.today
			border-color var(--fp-today-color, #60a5fa)
			color var(--fp-today-fg, #f9fafb)
			background var(--fp-today-bg, rgba(96, 165, 250, 0.15))
			&:hover,
			&:focus
				border-color var(--fp-today-color, #60a5fa)
				background var(--fp-today-hover-bg, rgba(96, 165, 250, 0.25))
				box-shadow var(--fp-today-hover-shadow, 0 2px 4px rgba(96, 165, 250, 0.4))
		
		&.selected,
		&.startRange,
		&.endRange
			background var(--fp-selected-bg, #3b82f6)
			border-color var(--fp-selected-bg, #3b82f6)
			&:hover,
			&:focus
				background var(--fp-selected-hover-bg, #2563eb)
				border-color var(--fp-selected-hover-bg, #2563eb)
		
		&.inRange
			background var(--fp-range-bg, rgba(96, 165, 250, 0.2))
			border-color var(--fp-range-bg, rgba(96, 165, 250, 0.2))
			box-shadow -5px 0 0 var(--fp-range-bg, rgba(96, 165, 250, 0.2)), 5px 0 0 var(--fp-range-bg, rgba(96, 165, 250, 0.2))
		
		&.disabled,
		&.prevMonthDay,
		&.nextMonthDay
			color var(--fp-disabled-color, #6b7280)
		
		&:hover:not(.disabled):not(.selected)
			background var(--fp-day-hover-bg, #374151)
			border-color var(--fp-day-hover-bg, #374151)
			box-shadow var(--fp-day-hover-shadow, 0 1px 3px rgba(0, 0, 0, 0.3))
	
	.flatpickr-time
		border-top-color var(--fp-time-border-color, #374151)
		background var(--fp-time-bg, #111827)
		
		input
			background var(--fp-time-input-bg, #1f2937)
			border-color var(--fp-time-input-border, #374151)
			color var(--fp-time-input-color, #f9fafb)
			&:hover,
			&:focus
				border-color var(--fp-time-input-hover-border, #3b82f6)
				background var(--fp-time-input-hover-bg, #1f2937)
	
	.flatpickr-time-separator,
	.flatpickr-am-pm
		color var(--fp-time-color, #f9fafb)

// High contrast mode support
@media (prefers-contrast: high)
	.flatpickr-calendar
		border-width 2px
		border-color var(--fp-border-color, #000000)
	
	.flatpickr-day
		&.today
			border-width 2px
		
		&.selected,
		&.startRange,
		&.endRange
			border-width 2px
			font-weight 700
		
		&:hover:not(.disabled):not(.selected)
			border 2px solid var(--fp-day-hover-border, #000000)

// Reduced motion support
@media (prefers-reduced-motion: reduce)
	.flatpickr-calendar,
	.flatpickr-day
		transition none
		animation none
